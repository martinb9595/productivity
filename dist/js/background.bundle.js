(()=>{var e={785:()=>{},762:e=>{e.exports={startFocusMode:function(e){},endFocusMode:function(){}}},564:()=>{}},o={};function t(s){var n=o[s];if(void 0!==n)return n.exports;var r=o[s]={exports:{}};return e[s](r,r.exports,t),r.exports}t.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return t.d(o,{a:o}),o},t.d=(e,o)=>{for(var s in o)t.o(o,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:o[s]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{"use strict";var e=t(762),o=t(564),s=t(785);self.addEventListener("install",(function(e){console.log("Service worker installed")})),self.addEventListener("activate",(function(e){console.log("Service worker activated")}));var n,r=0,c={focusSessions:0,totalFocusTime:0,dailyFocusTime:{},websitesBlocked:{},streaks:{currentStreak:0,longestStreak:0,lastFocusDate:null}};chrome.runtime.onInstalled.addListener((function(){chrome.storage.local.get(["blockedSites","isInFocusMode"],(function(e){e.blockedSites&&e.blockedSites,e.isInFocusMode&&(isInFocusMode=e.isInFocusMode)}))})),chrome.storage.onChanged.addListener((function(e,o){"local"===o&&(e.blockedSites&&e.blockedSites.newValue,e.isInFocusMode&&(isInFocusMode=e.isInFocusMode.newValue))})),chrome.runtime.onMessage.addListener((function(t,a,i){"startFocusMode"===t.action?chrome.storage.local.set({isInFocusMode:!0},(function(){r=Date.now()+1e3*t.duration,chrome.alarms.create("focusModeEnd",{when:r}),function(t){var r=t;(0,o.updateTimer)(r),c.focusSessions++;var a=(new Date).toISOString().split("T")[0];c.dailyFocusTime[a]=(c.dailyFocusTime[a]||0)+t/60,c.totalFocusTime+=t/60,(0,s.updateStreak)(a),chrome.storage.local.set({productivityAnalytics:c}),n=setInterval((function(){r--,(0,o.updateTimer)(r),r<=0&&(clearInterval(n),(0,e.endFocusMode)())}),1e3)}(t.duration)})):"endFocusMode"===t.action&&chrome.storage.local.set({isInFocusMode:!1},(function(){chrome.alarms.clear("focusModeEnd"),clearInterval(n)}))})),chrome.webNavigation.onBeforeNavigate.addListener((function(e){if(isInFocusMode&&0===e.frameId){var o=new URL(e.url);chrome.storage.local.get(["isPremium","customBlockedSites","freeBlockedSites"],(function(t){t.isPremium?(t.customBlockedSites||[]).some((function(e){return o.hostname.includes(e)}))&&chrome.tabs.update(e.tabId,{url:chrome.runtime.getURL("blocked.html")}):(t.freeBlockedSites||[]).some((function(e){return o.hostname.includes(e)}))&&chrome.tabs.update(e.tabId,{url:chrome.runtime.getURL("blocked.html")})}))}}))})()})();