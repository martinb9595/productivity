(()=>{"use strict";function t(t){var e=Math.floor(t/60),n=t%60;return"".concat(e,":").concat(n.toString().padStart(2,"0"))}document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("focusStatus"),n=document.getElementById("openSettings");function o(){chrome.runtime.sendMessage({action:"getTimerStatus"},(function(n){var o=n.timeRemaining,s=document.getElementById("focusModeStatus"),i=document.getElementById("timeRemaining");s&&i?(s.textContent=o>0?"Focus mode is running... Time left: ".concat(t(o)):"Focus mode is not running.",i.textContent=t(o),e.classList.toggle("text-green-500",o>0),e.classList.toggle("text-red-500",o<=0),e.style.display="block"):(e.textContent="Focus mode is not running.",e.classList.remove("text-green-500"),e.classList.add("text-red-500"),e.style.display="block")}))}var s=document.getElementById("focusStatus");function i(){chrome.runtime.sendMessage({action:"getTimerStatus"},(function(t){if(t&&void 0!==t.timeRemaining){var e=Math.floor(t.timeRemaining/60),n=t.timeRemaining%60;s.textContent="Focus mode is running... Time left: ".concat(e,":").concat(n.toString().padStart(2,"0")),s.classList.remove("text-red-500"),s.classList.add("text-green-500")}else s.textContent="Focus mode is not running.",s.classList.remove("text-green-500"),s.classList.add("text-red-500")}))}chrome.runtime.onMessage.addListener((function(t,e,n){if("updateTimer"===t.action){var o=Math.floor(t.timeRemaining/60),i=t.timeRemaining%60;s.textContent="Focus mode is running... Time left: ".concat(o,":").concat(i.toString().padStart(2,"0")),s.classList.remove("text-red-500"),s.classList.add("text-green-500")}})),i(),setInterval(i,1e3),n&&n.addEventListener("click",(function(){chrome.tabs.create({url:chrome.runtime.getURL("src/html/settings.html")})}));var a=document.getElementById("toggleFocus");a&&a.addEventListener("click",(function(){var t=document.getElementById("focusDuration"),e=document.getElementById("focusStatus"),n=parseInt(t.value,10);isNaN(n)||n<=0?e.textContent="Please enter a valid focus duration.":chrome.runtime.sendMessage({action:"startFocusMode",duration:n},(function(t){t&&t.success?(console.log("Focus mode started"),chrome.storage.local.set({isInFocusMode:!0,focusEndTime:Date.now()+60*n*1e3},(function(){o()}))):(console.error("Failed to start focus mode"),e.textContent="Failed to start focus mode.")}))}))}))})();