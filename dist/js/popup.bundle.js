document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("focusStatus"),t=document.getElementById("openSettings");function o(){chrome.storage.local.get(["isInFocusMode","focusEndTime"],(function(t){if(t.isInFocusMode&&t.focusEndTime){var o=Math.max(0,Math.floor((t.focusEndTime-Date.now())/1e3)),n=Math.floor(o/60),s=o%60;e.textContent="Focus mode is running... Time left: ".concat(n,":").concat(s.toString().padStart(2,"0")),e.classList.remove("text-red-500"),e.classList.add("text-green-500")}else e.textContent=""}))}setInterval(o,1e3),o(),t&&t.addEventListener("click",(function(){chrome.tabs.create({url:chrome.runtime.getURL("src/html/settings.html")})}));var n=document.getElementById("toggleFocus");n&&n.addEventListener("click",(function(){var e=document.getElementById("focusDuration"),t=document.getElementById("focusStatus"),o=parseInt(e.value,10);isNaN(o)||o<=0?t.textContent="Please enter a valid focus duration.":chrome.runtime.sendMessage({action:"startFocusMode",duration:o},(function(e){if(chrome.storage.local.set({isInFocusMode:!0,focusEndTime:Date.now()+60*o*1e3}),e&&e.success){console.log("Focus mode started"),t.textContent="Focus mode is running... Time left: "+o+":00";var n=60*o,s=setInterval((function(){n--;var e=Math.floor(n/60),o=n%60;t.textContent="Focus mode is running... Time left: ".concat(e,":").concat(o.toString().padStart(2,"0")),n<=0&&(clearInterval(s),t.textContent="Focus mode ended.",chrome.storage.local.set({isInFocusMode:!1}))}),1e3);t.classList.remove("text-red-500"),t.classList.add("text-green-500")}else console.error("Failed to start focus mode"),t.textContent="Failed to start focus mode."}))}))}));